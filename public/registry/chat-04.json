{
  "name": "chat-04",
  "type": "registry:block",
  "description": "A chat with generative UI capabilities.",
  "dependencies": [
    "ai",
    "@ai-sdk/openai",
    "@uiw/react-codemirror"
  ],
  "registryDependencies": [
    "resizable",
    "breadcrumb",
    "button",
    "https://simple-ai.alwurts.com/registry/chat-input.json",
    "https://simple-ai.alwurts.com/registry/chat-message-area.json",
    "https://simple-ai.alwurts.com/registry/chat-message.json"
  ],
  "files": [
    {
      "path": "blocks/chat-04/page.tsx",
      "content": "\"use client\";\n\nimport { useEffect } from \"react\";\nimport { Chat } from \"./components/chat\";\nimport { EditorLayout } from \"./components/editor-layout\";\nimport { useGenerationStore } from \"./store\";\n\nconst INITIAL_CODE = `<div className='bg-red-600 h-screen w-screen flex flex-col items-center justify-center gap-4'>\n\t<h1 className=\"text-white\">Hello from the preview</h1>\n\t<p className=\"text-white\">This is a paragraph</p>\n</div>`;\n\nexport default function Page() {\n\tconst { versions, addVersion } = useGenerationStore();\n\n\tuseEffect(() => {\n\t\t// Only add initial version if there are no versions yet\n\t\tif (versions.length === 0) {\n\t\t\taddVersion(INITIAL_CODE);\n\t\t}\n\t}, [versions.length, addVersion]);\n\n\treturn (\n\t\t<div className=\"flex w-screen h-screen justify-start\">\n\t\t\t<Chat />\n\t\t\t<EditorLayout />\n\t\t</div>\n\t);\n}\n",
      "type": "registry:page",
      "target": "app/chat/page.tsx"
    },
    {
      "path": "blocks/chat-04/components/chat.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport {\n\tChatInput,\n\tChatInputSubmit,\n\tChatInputTextArea,\n} from \"@/components/ui/chat-input\";\nimport { useGenerationStore } from \"../store\";\nimport { useEffect } from \"react\";\nimport type { ComponentPropsWithoutRef } from \"react\";\nimport { useCompletion } from \"ai/react\";\n\nexport function Chat({ className, ...props }: ComponentPropsWithoutRef<\"div\">) {\n\tconst { versions, currentVersion } = useGenerationStore();\n\n\tconst { data, isLoading, input, handleInputChange, handleSubmit, stop } =\n\t\tuseCompletion({\n\t\t\tapi: \"/api/ai/generate\",\n\t\t\tonFinish: (completion) => {\n\t\t\t\tconsole.log(\"completion\", completion);\n\t\t\t},\n\t\t});\n\n\tuseEffect(() => {\n\t\tif (data) {\n\t\t\tconsole.log(\"data\", data);\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<div\n\t\t\t{...props}\n\t\t\tclassName={cn(\n\t\t\t\t\"flex flex-col h-full overflow-y-auto w-[400px] shrink-0\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"flex-1 p-4 space-y-4 overflow-y-auto\">\n\t\t\t\t{versions.map((version) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={version.versionNumber}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"p-4 rounded-lg\",\n\t\t\t\t\t\t\tversion.versionNumber === currentVersion\n\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"font-medium mb-2\">\n\t\t\t\t\t\t\tVersion {version.versionNumber + 1}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"text-sm whitespace-pre-wrap\">{version.code}</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className=\"px-2 py-4 max-w-2xl mx-auto w-full\">\n\t\t\t\t<ChatInput\n\t\t\t\t\tvalue={input}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\tloading={isLoading}\n\t\t\t\t\tonStop={stop}\n\t\t\t\t>\n\t\t\t\t\t<ChatInputTextArea placeholder=\"Type your code generation prompt...\" />\n\t\t\t\t\t<ChatInputSubmit />\n\t\t\t\t</ChatInput>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n",
      "type": "registry:component",
      "target": ""
    }
  ]
}