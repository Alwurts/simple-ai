{
  "name": "flow-01",
  "type": "registry:block",
  "description": "A flow chart builder.",
  "dependencies": [
    "@xyflow/react",
    "zustand"
  ],
  "registryDependencies": [
    "button",
    "card",
    "dialog",
    "input",
    "textarea"
  ],
  "files": [
    {
      "path": "blocks/flow-01/page.tsx",
      "content": "\"use client\";\n\nimport {\n\tControls,\n\tMiniMap,\n\ttype NodeTypes,\n\tReactFlowProvider,\n} from \"@xyflow/react\";\nimport { Background, Panel, ReactFlow, useReactFlow } from \"@xyflow/react\";\nimport type React from \"react\";\nimport { shallow } from \"zustand/shallow\";\nimport \"@xyflow/react/dist/style.css\";\nimport { DevTools } from \"@/components/flow/devtools\";\nimport { Button } from \"@/components/ui/button\";\nimport { GenerateTextNode } from \"@/components/flow/generate-text-node\";\nimport { NodesPanel } from \"@/components/flow/nodes-panel\";\nimport { PromptCrafterNode } from \"@/components/flow/prompt-crafter-node\";\nimport { TextInputNode } from \"@/components/flow/text-input-node\";\nimport { VisualizeTextNode } from \"@/components/flow/visualize-text-node\";\nimport { useStore } from \"@/registry/blocks/flow-01/hooks/store\";\nimport type { FlowNode } from \"@/registry/blocks/flow-01/types/flow\";\nimport { prepareWorkflow } from \"./lib/workflow\";\n\nconst nodeTypes: NodeTypes = {\n\t\"generate-text\": GenerateTextNode,\n\t\"visualize-text\": VisualizeTextNode,\n\t\"text-input\": TextInputNode,\n\t\"prompt-crafter\": PromptCrafterNode,\n};\n\nfunction Flow() {\n\tconst store = useStore(\n\t\t(store) => ({\n\t\t\tnodes: store.nodes,\n\t\t\tedges: store.edges,\n\t\t\tonNodesChange: store.onNodesChange,\n\t\t\tonEdgesChange: store.onEdgesChange,\n\t\t\tonConnect: store.onConnect,\n\t\t\truntime: store.runtime,\n\t\t\t//startExecution: store.startExecution,\n\t\t\tcreateNode: store.createNode,\n\t\t}),\n\t\tshallow,\n\t);\n\n\tconst { screenToFlowPosition } = useReactFlow();\n\n\tconst onDragOver = (event: React.DragEvent) => {\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = \"move\";\n\t};\n\n\tconst onDrop = (event: React.DragEvent) => {\n\t\tevent.preventDefault();\n\n\t\tconst type = event.dataTransfer.getData(\n\t\t\t\"application/reactflow\",\n\t\t) as FlowNode[\"type\"];\n\n\t\t// Check if the dropped element is valid\n\t\tif (!type) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get the position of the drop\n\t\tconst position = screenToFlowPosition({\n\t\t\tx: event.clientX,\n\t\t\ty: event.clientY,\n\t\t});\n\n\t\tstore.createNode(type, position);\n\t};\n\n\treturn (\n\t\t<ReactFlow\n\t\t\tnodes={store.nodes}\n\t\t\tedges={store.edges}\n\t\t\tonNodesChange={store.onNodesChange}\n\t\t\tonEdgesChange={store.onEdgesChange}\n\t\t\tonConnect={store.onConnect}\n\t\t\tnodeTypes={nodeTypes}\n\t\t\tonDragOver={onDragOver}\n\t\t\tonDrop={onDrop}\n\t\t\tfitView\n\t\t>\n\t\t\t<Background />\n\t\t\t<DevTools />\n\t\t\t<Controls />\n\t\t\t<MiniMap />\n\t\t\t<NodesPanel />\n\t\t\t<Panel position=\"top-right\" className=\"flex gap-2 items-center\">\n\t\t\t\t{store.runtime.currentNodeIds.length > 0 && (\n\t\t\t\t\t<div className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tProcessing node: {store.runtime.currentNodeIds.join(\", \")}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<Button\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst workflow = prepareWorkflow(store.nodes, store.edges);\n\t\t\t\t\t\tconsole.log(workflow);\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={store.runtime.isRunning}\n\t\t\t\t>\n\t\t\t\t\t{store.runtime.isRunning ? \"Running...\" : \"Run Flow\"}\n\t\t\t\t</Button>\n\t\t\t</Panel>\n\t\t</ReactFlow>\n\t);\n}\n\nexport default function Flow01Page() {\n\treturn (\n\t\t<div className=\"w-screen h-screen\">\n\t\t\t<ReactFlowProvider>\n\t\t\t\t<Flow />\n\t\t\t</ReactFlowProvider>\n\t\t</div>\n\t);\n}\n",
      "type": "registry:page",
      "target": "app/flow/page.tsx"
    }
  ]
}