"use client";

import { cn } from "@/lib/utils";
import { useRef, type HTMLAttributes } from "react";
import {
	EVENT_NODE_FILL_COLOR,
	EVENT_NODE_STROKE_COLOR,
	GATEWAY_NODE_FILL_COLOR,
	GATEWAY_NODE_STROKE_COLOR,
	TASK_NODE_FILL_COLOR,
	TASK_NODE_STROKE_COLOR,
	useWorkflowAnimation,
} from "./hooks/use-workflow-animation";

const workflows = [
	{
		steps: [
			{
				nodes: [],
				paths: [],
			},
			{
				nodes: ["event-in"],
				paths: ["path-in"],
			},
			{
				nodes: ["gateway-router"],
				paths: [],
			},
			{
				nodes: ["task-agent-01"],
				paths: ["path-01"],
			},
			{
				nodes: ["event-out"],
				paths: ["path-result-01"],
			},
		],
	},
	{
		steps: [
			{
				nodes: [],
				paths: [],
			},
			{
				nodes: ["event-in"],
				paths: ["path-in"],
			},
			{
				nodes: ["gateway-router"],
				paths: [],
			},
			{
				nodes: ["task-agent-02"],
				paths: ["path-02"],
			},
			{
				nodes: ["event-out"],
				paths: ["path-result-02"],
			},
		],
	},
	{
		steps: [
			{
				nodes: [],
				paths: [],
			},
			{
				nodes: ["event-in"],
				paths: ["path-in"],
			},
			{
				nodes: ["gateway-router"],
				paths: [],
			},
			{
				nodes: ["task-agent-03"],
				paths: ["path-03"],
			},
			{
				nodes: ["event-out"],
				paths: ["path-result-03"],
			},
		],
	},
];

export function RoutingWorkflow(props: HTMLAttributes<SVGSVGElement>) {
	const svgRef = useRef<SVGSVGElement>(null);

	useWorkflowAnimation({
		workflows,
		svgRef,
	});

	return (
		<svg
			ref={svgRef}
			width="1050"
			height="500"
			viewBox="-30 0 1020 500"
			fill="none"
			xmlns="http://www.w3.org/2000/svg"
			className={cn("border border-border", props.className)}
			{...props}
		>
			<title>Routing Workflow</title>
			<rect width="1050" height="500" fill="transparent" />
			<rect
				x="487"
				y="87.7056"
				width="191"
				height="63"
				rx="3"
				fill={TASK_NODE_FILL_COLOR}
			/>
			<rect
				id="task-agent-01"
				x="487"
				y="87.7056"
				width="191"
				height="63"
				rx="3"
				stroke={TASK_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M520.585 126.206H516.807L521.714 111.66H526.395L531.302 126.206H527.524L524.108 115.325H523.994L520.585 126.206ZM520.081 120.481H527.979V123.152H520.081V120.481ZM537.27 130.524C536.233 130.524 535.345 130.379 534.607 130.091C533.868 129.802 533.288 129.406 532.867 128.904C532.445 128.403 532.192 127.834 532.107 127.2L535.395 127.015C535.457 127.238 535.57 127.432 535.736 127.598C535.906 127.763 536.127 127.891 536.396 127.981C536.671 128.071 536.993 128.116 537.362 128.116C537.945 128.116 538.425 127.974 538.804 127.69C539.188 127.411 539.379 126.921 539.379 126.22V124.302H539.259C539.121 124.638 538.913 124.939 538.634 125.204C538.354 125.469 538.006 125.678 537.59 125.829C537.178 125.981 536.704 126.056 536.169 126.056C535.374 126.056 534.645 125.872 533.982 125.502C533.324 125.128 532.796 124.551 532.398 123.769C532.005 122.984 531.808 121.973 531.808 120.737C531.808 119.463 532.012 118.414 532.419 117.591C532.826 116.762 533.359 116.149 534.017 115.751C534.68 115.353 535.393 115.154 536.155 115.154C536.728 115.154 537.218 115.254 537.625 115.453C538.037 115.647 538.376 115.898 538.641 116.206C538.906 116.513 539.107 116.833 539.244 117.164H539.344V115.296H542.803V126.248C542.803 127.171 542.571 127.95 542.107 128.585C541.643 129.219 540.994 129.7 540.161 130.027C539.327 130.358 538.364 130.524 537.27 130.524ZM537.377 123.528C537.798 123.528 538.158 123.417 538.456 123.194C538.754 122.972 538.984 122.652 539.145 122.235C539.306 121.819 539.387 121.319 539.387 120.737C539.387 120.145 539.306 119.636 539.145 119.21C538.989 118.779 538.759 118.448 538.456 118.216C538.158 117.984 537.798 117.867 537.377 117.867C536.946 117.867 536.581 117.986 536.283 118.223C535.985 118.459 535.757 118.793 535.601 119.224C535.45 119.65 535.374 120.154 535.374 120.737C535.374 121.319 535.452 121.819 535.608 122.235C535.764 122.652 535.989 122.972 536.283 123.194C536.581 123.417 536.946 123.528 537.377 123.528ZM550.116 126.412C548.975 126.412 547.99 126.187 547.162 125.737C546.338 125.282 545.703 124.636 545.258 123.798C544.818 122.955 544.598 121.954 544.598 120.794C544.598 119.667 544.82 118.682 545.265 117.839C545.711 116.992 546.338 116.333 547.148 115.865C547.957 115.391 548.911 115.154 550.01 115.154C550.786 115.154 551.497 115.275 552.14 115.517C552.784 115.758 553.341 116.116 553.809 116.589C554.278 117.063 554.643 117.647 554.903 118.343C555.164 119.035 555.294 119.828 555.294 120.723V121.589H545.812V119.572H552.062C552.058 119.203 551.97 118.874 551.8 118.585C551.629 118.296 551.395 118.071 551.096 117.91C550.803 117.744 550.464 117.662 550.081 117.662C549.693 117.662 549.345 117.749 549.037 117.924C548.729 118.095 548.485 118.329 548.305 118.627C548.125 118.921 548.031 119.255 548.021 119.629V121.681C548.021 122.126 548.109 122.517 548.284 122.853C548.459 123.185 548.708 123.443 549.03 123.627C549.352 123.812 549.735 123.904 550.18 123.904C550.488 123.904 550.767 123.862 551.018 123.777C551.269 123.691 551.485 123.566 551.665 123.4C551.845 123.234 551.979 123.031 552.069 122.789L555.258 122.882C555.126 123.597 554.835 124.219 554.385 124.75C553.94 125.275 553.355 125.685 552.631 125.978C551.906 126.267 551.068 126.412 550.116 126.412ZM560.541 119.984V126.206H557.068V115.296H560.37V117.299H560.491C560.732 116.632 561.144 116.109 561.727 115.73C562.309 115.346 563.003 115.154 563.808 115.154C564.575 115.154 565.24 115.327 565.803 115.673C566.372 116.014 566.812 116.492 567.124 117.108C567.442 117.718 567.598 118.433 567.593 119.252V126.206H564.12V119.934C564.125 119.328 563.971 118.855 563.659 118.514C563.351 118.173 562.922 118.002 562.373 118.002C562.008 118.002 561.686 118.083 561.407 118.244C561.133 118.4 560.919 118.625 560.768 118.919C560.621 119.212 560.545 119.567 560.541 119.984ZM575.901 115.296V117.853H569.019V115.296H575.901ZM570.461 112.683H573.934V122.775C573.934 122.988 573.967 123.161 574.033 123.294C574.104 123.421 574.206 123.514 574.339 123.571C574.471 123.623 574.63 123.649 574.814 123.649C574.947 123.649 575.087 123.637 575.233 123.613C575.385 123.585 575.499 123.561 575.574 123.542L576.1 126.049C575.934 126.097 575.7 126.156 575.397 126.227C575.099 126.298 574.741 126.343 574.324 126.362C573.51 126.4 572.812 126.305 572.229 126.078C571.652 125.846 571.209 125.486 570.901 124.998C570.598 124.51 570.451 123.897 570.461 123.159V112.683ZM588.703 110.978L584.015 128.393H581.054L585.741 110.978H588.703ZM594.294 126.206V111.66H597.81V123.35H603.861V126.206H594.294ZM605.681 126.206V111.66H609.197V123.35H615.248V126.206H605.681ZM617.068 111.66H621.421L625.115 120.666H625.285L628.978 111.66H633.332V126.206H629.909V117.271H629.788L626.294 126.113H624.106L620.612 117.221H620.491V126.206H617.068V111.66ZM646.519 111.66V126.206H643.01V114.941H642.925L639.672 116.93V113.89L643.259 111.66H646.519Z"
				fill="#0F631C"
			/>
			<rect
				x="323.782"
				y="173.414"
				width="108"
				height="108"
				rx="3"
				transform="rotate(45 323.782 173.414)"
				fill={GATEWAY_NODE_FILL_COLOR}
			/>
			<rect
				id="gateway-router"
				x="323.782"
				y="173.414"
				width="108"
				height="108"
				rx="3"
				transform="rotate(45 323.782 173.414)"
				stroke={GATEWAY_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M262.754 256.782V242.236H268.762C269.851 242.236 270.791 242.433 271.582 242.826C272.377 243.214 272.99 243.773 273.421 244.502C273.852 245.226 274.068 246.086 274.068 247.08C274.068 248.089 273.847 248.946 273.407 249.651C272.967 250.352 272.342 250.887 271.532 251.256C270.722 251.621 269.764 251.803 268.656 251.803H264.856V249.033H268.002C268.533 249.033 268.975 248.965 269.33 248.827C269.69 248.685 269.962 248.472 270.147 248.188C270.332 247.899 270.424 247.53 270.424 247.08C270.424 246.63 270.332 246.259 270.147 245.965C269.962 245.667 269.69 245.444 269.33 245.297C268.971 245.146 268.528 245.07 268.002 245.07H266.269V256.782H262.754ZM270.943 250.134L274.565 256.782H270.73L267.178 250.134H270.943ZM280.873 256.988C279.728 256.988 278.743 256.753 277.919 256.285C277.1 255.811 276.468 255.153 276.023 254.31C275.582 253.463 275.362 252.48 275.362 251.363C275.362 250.241 275.582 249.258 276.023 248.415C276.468 247.568 277.1 246.91 277.919 246.441C278.743 245.967 279.728 245.731 280.873 245.731C282.019 245.731 283.002 245.967 283.821 246.441C284.645 246.91 285.277 247.568 285.717 248.415C286.162 249.258 286.385 250.241 286.385 251.363C286.385 252.48 286.162 253.463 285.717 254.31C285.277 255.153 284.645 255.811 283.821 256.285C283.002 256.753 282.019 256.988 280.873 256.988ZM280.895 254.367C281.311 254.367 281.664 254.239 281.953 253.983C282.242 253.728 282.462 253.373 282.613 252.918C282.77 252.464 282.848 251.938 282.848 251.341C282.848 250.735 282.77 250.205 282.613 249.75C282.462 249.296 282.242 248.941 281.953 248.685C281.664 248.429 281.311 248.302 280.895 248.302C280.464 248.302 280.099 248.429 279.801 248.685C279.507 248.941 279.282 249.296 279.126 249.75C278.975 250.205 278.899 250.735 278.899 251.341C278.899 251.938 278.975 252.464 279.126 252.918C279.282 253.373 279.507 253.728 279.801 253.983C280.099 254.239 280.464 254.367 280.895 254.367ZM295.202 252.073V245.873H298.668V256.782H295.358V254.75H295.245C295.003 255.418 294.591 255.948 294.009 256.341C293.431 256.73 292.733 256.924 291.914 256.924C291.17 256.924 290.517 256.753 289.954 256.412C289.39 256.072 288.952 255.596 288.64 254.985C288.327 254.369 288.169 253.65 288.164 252.826V245.873H291.637V252.144C291.642 252.736 291.798 253.202 292.106 253.543C292.413 253.884 292.832 254.054 293.363 254.054C293.708 254.054 294.018 253.979 294.293 253.827C294.572 253.671 294.793 253.446 294.954 253.152C295.119 252.854 295.202 252.494 295.202 252.073ZM307.036 245.873V248.429H300.154V245.873H307.036ZM301.596 243.259H305.069V253.351C305.069 253.564 305.102 253.737 305.168 253.87C305.239 253.998 305.341 254.09 305.474 254.147C305.606 254.199 305.765 254.225 305.95 254.225C306.082 254.225 306.222 254.213 306.369 254.189C306.52 254.161 306.634 254.137 306.71 254.118L307.235 256.625C307.069 256.673 306.835 256.732 306.532 256.803C306.234 256.874 305.876 256.919 305.46 256.938C304.645 256.976 303.947 256.881 303.364 256.654C302.787 256.422 302.344 256.062 302.036 255.574C301.733 255.087 301.587 254.473 301.596 253.735V243.259ZM313.791 256.988C312.65 256.988 311.665 256.763 310.836 256.313C310.012 255.858 309.378 255.212 308.933 254.374C308.492 253.531 308.272 252.53 308.272 251.37C308.272 250.243 308.495 249.258 308.94 248.415C309.385 247.568 310.012 246.91 310.822 246.441C311.632 245.967 312.586 245.731 313.684 245.731C314.461 245.731 315.171 245.851 315.815 246.093C316.459 246.334 317.015 246.692 317.484 247.165C317.953 247.639 318.317 248.223 318.578 248.92C318.838 249.611 318.968 250.404 318.968 251.299V252.165H309.487V250.148H315.737C315.732 249.779 315.644 249.45 315.474 249.161C315.303 248.872 315.069 248.647 314.771 248.486C314.477 248.321 314.139 248.238 313.755 248.238C313.367 248.238 313.019 248.325 312.711 248.5C312.403 248.671 312.159 248.905 311.98 249.204C311.8 249.497 311.705 249.831 311.695 250.205V252.258C311.695 252.703 311.783 253.093 311.958 253.429C312.133 253.761 312.382 254.019 312.704 254.204C313.026 254.388 313.409 254.481 313.855 254.481C314.162 254.481 314.442 254.438 314.693 254.353C314.944 254.268 315.159 254.142 315.339 253.976C315.519 253.811 315.654 253.607 315.744 253.366L318.933 253.458C318.8 254.173 318.509 254.795 318.059 255.326C317.614 255.851 317.029 256.261 316.305 256.554C315.58 256.843 314.742 256.988 313.791 256.988ZM320.742 256.782V245.873H324.116V247.861H324.229C324.428 247.142 324.752 246.607 325.202 246.256C325.652 245.901 326.175 245.723 326.772 245.723C326.933 245.723 327.098 245.735 327.269 245.759C327.439 245.778 327.598 245.809 327.745 245.851V248.87C327.579 248.813 327.361 248.768 327.091 248.735C326.826 248.702 326.589 248.685 326.381 248.685C325.969 248.685 325.598 248.777 325.266 248.962C324.939 249.142 324.681 249.395 324.492 249.722C324.307 250.044 324.215 250.423 324.215 250.858V256.782H320.742ZM340.19 241.554L335.502 258.969H332.541L337.228 241.554H340.19ZM345.781 256.782V242.236H349.297V253.927H355.348V256.782H345.781ZM357.168 256.782V242.236H360.683V253.927H366.735V256.782H357.168ZM368.554 242.236H372.908L376.601 251.242H376.772L380.465 242.236H384.819V256.782H381.395V247.847H381.275L377.78 256.689H375.593L372.098 247.797H371.978V256.782H368.554V242.236Z"
				fill={GATEWAY_NODE_STROKE_COLOR}
			/>
			<rect
				x="781"
				y="206"
				width="88"
				height="88"
				rx="44"
				fill={EVENT_NODE_FILL_COLOR}
			/>
			<rect
				id="event-out"
				x="781"
				y="206"
				width="88"
				height="88"
				rx="44"
				stroke={EVENT_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M821.617 249.727C821.617 251.328 821.309 252.684 820.693 253.797C820.078 254.91 819.244 255.755 818.193 256.332C817.147 256.91 815.973 257.199 814.671 257.199C813.364 257.199 812.187 256.908 811.141 256.325C810.094 255.743 809.263 254.898 808.648 253.79C808.037 252.677 807.732 251.323 807.732 249.727C807.732 248.127 808.037 246.77 808.648 245.658C809.263 244.545 810.094 243.7 811.141 243.122C812.187 242.545 813.364 242.256 814.671 242.256C815.973 242.256 817.147 242.545 818.193 243.122C819.244 243.7 820.078 244.545 820.693 245.658C821.309 246.77 821.617 248.127 821.617 249.727ZM818.023 249.727C818.023 248.78 817.888 247.98 817.618 247.327C817.353 246.673 816.969 246.179 816.468 245.842C815.97 245.506 815.371 245.338 814.671 245.338C813.975 245.338 813.376 245.506 812.874 245.842C812.372 246.179 811.986 246.673 811.716 247.327C811.451 247.98 811.318 248.78 811.318 249.727C811.318 250.674 811.451 251.474 811.716 252.128C811.986 252.781 812.372 253.276 812.874 253.612C813.376 253.948 813.975 254.116 814.671 254.116C815.371 254.116 815.97 253.948 816.468 253.612C816.969 253.276 817.353 252.781 817.618 252.128C817.888 251.474 818.023 250.674 818.023 249.727ZM830.708 252.291V246.091H834.173V257H830.864V254.969H830.75C830.509 255.636 830.097 256.167 829.514 256.56C828.937 256.948 828.238 257.142 827.419 257.142C826.676 257.142 826.022 256.972 825.459 256.631C824.896 256.29 824.458 255.814 824.145 255.203C823.833 254.588 823.674 253.868 823.669 253.044V246.091H827.142V252.362C827.147 252.954 827.303 253.42 827.611 253.761C827.919 254.102 828.338 254.273 828.868 254.273C829.214 254.273 829.524 254.197 829.798 254.045C830.078 253.889 830.298 253.664 830.459 253.371C830.625 253.072 830.708 252.713 830.708 252.291ZM842.542 246.091V248.648H835.66V246.091H842.542ZM837.101 243.477H840.574V253.57C840.574 253.783 840.608 253.955 840.674 254.088C840.745 254.216 840.847 254.308 840.979 254.365C841.112 254.417 841.27 254.443 841.455 254.443C841.588 254.443 841.727 254.431 841.874 254.408C842.026 254.379 842.139 254.356 842.215 254.337L842.741 256.844C842.575 256.891 842.34 256.95 842.037 257.021C841.739 257.092 841.382 257.137 840.965 257.156C840.151 257.194 839.452 257.099 838.87 256.872C838.292 256.64 837.849 256.28 837.542 255.793C837.239 255.305 837.092 254.692 837.101 253.953V243.477Z"
				fill={EVENT_NODE_STROKE_COLOR}
			/>

			<rect
				x="77"
				y="206"
				width="88"
				height="88"
				rx="44"
				fill={EVENT_NODE_FILL_COLOR}
			/>
			<rect
				id="event-in"
				x="77"
				y="206"
				width="88"
				height="88"
				rx="44"
				stroke={EVENT_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M116.417 242.455V257H112.902V242.455H116.417ZM122.097 250.778V257H118.624V246.091H121.927V248.094H122.048C122.289 247.426 122.701 246.903 123.283 246.524C123.866 246.141 124.559 245.949 125.364 245.949C126.131 245.949 126.797 246.122 127.36 246.467C127.928 246.808 128.369 247.286 128.681 247.902C128.998 248.513 129.155 249.228 129.15 250.047V257H125.677V250.729C125.682 250.123 125.528 249.649 125.215 249.308C124.907 248.967 124.479 248.797 123.93 248.797C123.565 248.797 123.243 248.877 122.964 249.038C122.689 249.195 122.476 249.42 122.325 249.713C122.178 250.007 122.102 250.362 122.097 250.778Z"
				fill={EVENT_NODE_STROKE_COLOR}
			/>
			<rect
				x="487"
				y="217.706"
				width="191"
				height="63"
				rx="3"
				fill={TASK_NODE_FILL_COLOR}
			/>
			<rect
				id="task-agent-02"
				x="487"
				y="217.706"
				width="191"
				height="63"
				rx="3"
				stroke={TASK_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M519.179 256.206H515.4L520.308 241.66H524.988L529.896 256.206H526.118L522.702 245.325H522.588L519.179 256.206ZM518.675 250.481H526.572V253.152H518.675V250.481ZM535.864 260.524C534.827 260.524 533.939 260.379 533.2 260.091C532.462 259.802 531.882 259.406 531.46 258.904C531.039 258.403 530.786 257.834 530.7 257.2L533.989 257.015C534.05 257.238 534.164 257.432 534.33 257.598C534.5 257.763 534.72 257.891 534.99 257.981C535.265 258.071 535.587 258.116 535.956 258.116C536.539 258.116 537.019 257.974 537.398 257.69C537.781 257.411 537.973 256.921 537.973 256.22V254.302H537.852C537.715 254.638 537.507 254.939 537.227 255.204C536.948 255.469 536.6 255.678 536.183 255.829C535.771 255.981 535.298 256.056 534.763 256.056C533.968 256.056 533.238 255.872 532.575 255.502C531.917 255.128 531.389 254.551 530.992 253.769C530.599 252.984 530.402 251.973 530.402 250.737C530.402 249.463 530.606 248.414 531.013 247.591C531.42 246.762 531.953 246.149 532.611 245.751C533.274 245.353 533.986 245.154 534.749 245.154C535.322 245.154 535.812 245.254 536.219 245.453C536.631 245.647 536.969 245.898 537.235 246.206C537.5 246.513 537.701 246.833 537.838 247.164H537.938V245.296H541.396V256.248C541.396 257.171 541.164 257.95 540.7 258.585C540.236 259.219 539.588 259.7 538.754 260.027C537.921 260.358 536.958 260.524 535.864 260.524ZM535.97 253.528C536.392 253.528 536.752 253.417 537.05 253.194C537.348 252.972 537.578 252.652 537.739 252.235C537.9 251.819 537.98 251.319 537.98 250.737C537.98 250.145 537.9 249.636 537.739 249.21C537.583 248.779 537.353 248.448 537.05 248.216C536.752 247.984 536.392 247.867 535.97 247.867C535.539 247.867 535.175 247.986 534.877 248.223C534.578 248.459 534.351 248.793 534.195 249.224C534.043 249.65 533.968 250.154 533.968 250.737C533.968 251.319 534.046 251.819 534.202 252.235C534.358 252.652 534.583 252.972 534.877 253.194C535.175 253.417 535.539 253.528 535.97 253.528ZM548.71 256.412C547.569 256.412 546.584 256.187 545.756 255.737C544.932 255.282 544.297 254.636 543.852 253.798C543.412 252.955 543.192 251.954 543.192 250.794C543.192 249.667 543.414 248.682 543.859 247.839C544.304 246.992 544.932 246.333 545.741 245.865C546.551 245.391 547.505 245.154 548.604 245.154C549.38 245.154 550.09 245.275 550.734 245.517C551.378 245.758 551.934 246.116 552.403 246.589C552.872 247.063 553.237 247.647 553.497 248.343C553.757 249.035 553.888 249.828 553.888 250.723V251.589H544.406V249.572H550.656C550.651 249.203 550.564 248.874 550.393 248.585C550.223 248.296 549.988 248.071 549.69 247.91C549.397 247.744 549.058 247.662 548.675 247.662C548.286 247.662 547.938 247.749 547.631 247.924C547.323 248.095 547.079 248.329 546.899 248.627C546.719 248.921 546.624 249.255 546.615 249.629V251.681C546.615 252.126 546.702 252.517 546.878 252.853C547.053 253.185 547.301 253.443 547.623 253.627C547.945 253.812 548.329 253.904 548.774 253.904C549.082 253.904 549.361 253.862 549.612 253.777C549.863 253.691 550.078 253.566 550.258 253.4C550.438 253.234 550.573 253.031 550.663 252.789L553.852 252.882C553.72 253.597 553.428 254.219 552.979 254.75C552.533 255.275 551.949 255.685 551.224 255.978C550.5 256.267 549.662 256.412 548.71 256.412ZM559.134 249.984V256.206H555.661V245.296H558.964V247.299H559.085C559.326 246.632 559.738 246.109 560.32 245.73C560.903 245.346 561.597 245.154 562.401 245.154C563.169 245.154 563.834 245.327 564.397 245.673C564.965 246.014 565.406 246.492 565.718 247.108C566.035 247.718 566.192 248.433 566.187 249.252V256.206H562.714V249.934C562.719 249.328 562.565 248.855 562.252 248.514C561.945 248.173 561.516 248.002 560.967 248.002C560.602 248.002 560.28 248.083 560.001 248.244C559.726 248.4 559.513 248.625 559.362 248.919C559.215 249.212 559.139 249.567 559.134 249.984ZM574.495 245.296V247.853H567.613V245.296H574.495ZM569.055 242.683H572.528V252.775C572.528 252.988 572.561 253.161 572.627 253.294C572.698 253.421 572.8 253.514 572.932 253.571C573.065 253.623 573.224 253.649 573.408 253.649C573.541 253.649 573.68 253.637 573.827 253.613C573.979 253.585 574.092 253.561 574.168 253.542L574.694 256.049C574.528 256.097 574.294 256.156 573.991 256.227C573.692 256.298 573.335 256.343 572.918 256.362C572.104 256.4 571.405 256.305 570.823 256.078C570.245 255.846 569.803 255.486 569.495 254.998C569.192 254.51 569.045 253.897 569.055 253.159V242.683ZM587.297 240.978L582.609 258.393H579.648L584.335 240.978H587.297ZM592.888 256.206V241.66H596.404V253.35H602.455V256.206H592.888ZM604.275 256.206V241.66H607.79V253.35H613.841V256.206H604.275ZM615.661 241.66H620.015L623.708 250.666H623.879L627.572 241.66H631.926V256.206H628.502V247.271H628.382L624.887 256.113H622.7L619.205 247.221H619.085V256.206H615.661V241.66ZM638.387 256.206V253.677L643.692 249.032C644.09 248.672 644.429 248.343 644.708 248.045C644.987 247.742 645.2 247.439 645.347 247.136C645.494 246.828 645.567 246.494 645.567 246.135C645.567 245.732 645.48 245.389 645.305 245.105C645.129 244.816 644.888 244.593 644.58 244.437C644.272 244.281 643.92 244.203 643.522 244.203C643.119 244.203 642.767 244.286 642.464 244.451C642.161 244.612 641.924 244.847 641.753 245.154C641.588 245.462 641.505 245.836 641.505 246.277H638.174C638.174 245.287 638.396 244.432 638.841 243.713C639.287 242.993 639.912 242.439 640.716 242.051C641.526 241.658 642.466 241.461 643.536 241.461C644.639 241.461 645.598 241.646 646.412 242.015C647.227 242.385 647.857 242.901 648.302 243.564C648.751 244.222 648.976 244.986 648.976 245.858C648.976 246.412 648.865 246.961 648.643 247.505C648.42 248.05 648.02 248.651 647.442 249.309C646.869 249.967 646.055 250.756 644.999 251.674L643.259 253.279V253.372H649.154V256.206H638.387Z"
				fill="#0F631C"
			/>
			<rect
				x="487"
				y="347.706"
				width="191"
				height="63"
				rx="3"
				fill={TASK_NODE_FILL_COLOR}
			/>
			<rect
				id="task-agent-03"
				x="487"
				y="347.706"
				width="191"
				height="63"
				rx="3"
				stroke={TASK_NODE_STROKE_COLOR}
				strokeWidth="2"
			/>
			<path
				d="M518.886 386.206H515.107L520.015 371.66H524.695L529.603 386.206H525.825L522.409 375.325H522.295L518.886 386.206ZM518.382 380.481H526.279V383.152H518.382V380.481ZM535.571 390.524C534.534 390.524 533.646 390.379 532.907 390.091C532.169 389.802 531.589 389.406 531.167 388.904C530.746 388.403 530.493 387.834 530.407 387.2L533.696 387.015C533.757 387.238 533.871 387.432 534.037 387.598C534.207 387.763 534.427 387.891 534.697 387.981C534.972 388.071 535.294 388.116 535.663 388.116C536.246 388.116 536.726 387.974 537.105 387.69C537.488 387.411 537.68 386.921 537.68 386.22V384.302H537.559C537.422 384.638 537.214 384.939 536.934 385.204C536.655 385.469 536.307 385.678 535.89 385.829C535.479 385.981 535.005 386.056 534.47 386.056C533.675 386.056 532.945 385.872 532.282 385.502C531.624 385.128 531.096 384.551 530.699 383.769C530.306 382.984 530.109 381.973 530.109 380.737C530.109 379.463 530.313 378.414 530.72 377.591C531.127 376.762 531.66 376.149 532.318 375.751C532.981 375.353 533.693 375.154 534.456 375.154C535.029 375.154 535.519 375.254 535.926 375.453C536.338 375.647 536.676 375.898 536.942 376.206C537.207 376.513 537.408 376.833 537.545 377.164H537.645V375.296H541.104V386.248C541.104 387.171 540.872 387.95 540.407 388.585C539.943 389.219 539.295 389.7 538.461 390.027C537.628 390.358 536.665 390.524 535.571 390.524ZM535.677 383.528C536.099 383.528 536.459 383.417 536.757 383.194C537.055 382.972 537.285 382.652 537.446 382.235C537.607 381.819 537.687 381.319 537.687 380.737C537.687 380.145 537.607 379.636 537.446 379.21C537.29 378.779 537.06 378.448 536.757 378.216C536.459 377.984 536.099 377.867 535.677 377.867C535.247 377.867 534.882 377.986 534.584 378.223C534.285 378.459 534.058 378.793 533.902 379.224C533.75 379.65 533.675 380.154 533.675 380.737C533.675 381.319 533.753 381.819 533.909 382.235C534.065 382.652 534.29 382.972 534.584 383.194C534.882 383.417 535.247 383.528 535.677 383.528ZM548.417 386.412C547.276 386.412 546.291 386.187 545.463 385.737C544.639 385.282 544.004 384.636 543.559 383.798C543.119 382.955 542.899 381.954 542.899 380.794C542.899 379.667 543.121 378.682 543.566 377.839C544.011 376.992 544.639 376.333 545.448 375.865C546.258 375.391 547.212 375.154 548.311 375.154C549.087 375.154 549.797 375.275 550.441 375.517C551.085 375.758 551.642 376.116 552.11 376.589C552.579 377.063 552.944 377.647 553.204 378.343C553.464 379.035 553.595 379.828 553.595 380.723V381.589H544.113V379.572H550.363C550.358 379.203 550.271 378.874 550.1 378.585C549.93 378.296 549.695 378.071 549.397 377.91C549.104 377.744 548.765 377.662 548.382 377.662C547.993 377.662 547.645 377.749 547.338 377.924C547.03 378.095 546.786 378.329 546.606 378.627C546.426 378.921 546.331 379.255 546.322 379.629V381.681C546.322 382.126 546.41 382.517 546.585 382.853C546.76 383.185 547.008 383.443 547.33 383.627C547.652 383.812 548.036 383.904 548.481 383.904C548.789 383.904 549.068 383.862 549.319 383.777C549.57 383.691 549.785 383.566 549.965 383.4C550.145 383.234 550.28 383.031 550.37 382.789L553.559 382.882C553.427 383.597 553.135 384.219 552.686 384.75C552.24 385.275 551.656 385.685 550.931 385.978C550.207 386.267 549.369 386.412 548.417 386.412ZM558.841 379.984V386.206H555.368V375.296H558.671V377.299H558.792C559.033 376.632 559.445 376.109 560.028 375.73C560.61 375.346 561.304 375.154 562.108 375.154C562.876 375.154 563.541 375.327 564.104 375.673C564.672 376.014 565.113 376.492 565.425 377.108C565.742 377.718 565.899 378.433 565.894 379.252V386.206H562.421V379.934C562.426 379.328 562.272 378.855 561.959 378.514C561.652 378.173 561.223 378.002 560.674 378.002C560.309 378.002 559.987 378.083 559.708 378.244C559.433 378.4 559.22 378.625 559.069 378.919C558.922 379.212 558.846 379.567 558.841 379.984ZM574.202 375.296V377.853H567.32V375.296H574.202ZM568.762 372.683H572.235V382.775C572.235 382.988 572.268 383.161 572.334 383.294C572.405 383.421 572.507 383.514 572.639 383.571C572.772 383.623 572.931 383.649 573.115 383.649C573.248 383.649 573.387 383.637 573.534 383.613C573.686 383.585 573.799 383.561 573.875 383.542L574.401 386.049C574.235 386.097 574.001 386.156 573.698 386.227C573.399 386.298 573.042 386.343 572.625 386.362C571.811 386.4 571.112 386.305 570.53 386.078C569.952 385.846 569.51 385.486 569.202 384.998C568.899 384.51 568.752 383.897 568.762 383.159V372.683ZM587.004 370.978L582.316 388.393H579.355L584.042 370.978H587.004ZM592.595 386.206V371.66H596.111V383.35H602.162V386.206H592.595ZM603.982 386.206V371.66H607.497V383.35H613.548V386.206H603.982ZM615.368 371.66H619.722L623.415 380.666H623.586L627.279 371.66H631.633V386.206H628.209V377.271H628.089L624.594 386.113H622.407L618.912 377.221H618.792V386.206H615.368V371.66ZM643.627 386.404C642.519 386.404 641.536 386.215 640.679 385.836C639.827 385.453 639.155 384.925 638.662 384.252C638.17 383.58 637.919 382.806 637.909 381.93H641.446C641.46 382.247 641.562 382.529 641.752 382.775C641.941 383.017 642.199 383.206 642.526 383.343C642.852 383.481 643.224 383.549 643.641 383.549C644.057 383.549 644.424 383.476 644.742 383.329C645.064 383.178 645.315 382.972 645.494 382.711C645.674 382.446 645.762 382.143 645.757 381.802C645.762 381.461 645.665 381.158 645.466 380.893C645.267 380.628 644.985 380.422 644.621 380.275C644.261 380.128 643.835 380.055 643.343 380.055H641.929V377.555H643.343C643.773 377.555 644.152 377.484 644.479 377.342C644.81 377.2 645.068 377.001 645.253 376.745C645.438 376.485 645.528 376.187 645.523 375.85C645.528 375.524 645.45 375.237 645.289 374.991C645.132 374.74 644.912 374.546 644.628 374.409C644.349 374.271 644.024 374.203 643.655 374.203C643.267 374.203 642.914 374.271 642.597 374.409C642.284 374.546 642.036 374.74 641.851 374.991C641.666 375.242 641.569 375.533 641.56 375.865H638.2C638.21 374.998 638.451 374.236 638.925 373.578C639.398 372.915 640.042 372.396 640.857 372.022C641.676 371.648 642.609 371.461 643.655 371.461C644.697 371.461 645.613 371.644 646.404 372.008C647.194 372.373 647.81 372.87 648.25 373.5C648.691 374.125 648.911 374.832 648.911 375.623C648.915 376.442 648.648 377.117 648.108 377.647C647.573 378.178 646.884 378.504 646.041 378.627V378.741C647.168 378.874 648.018 379.238 648.591 379.835C649.169 380.431 649.455 381.177 649.45 382.072C649.45 382.915 649.202 383.663 648.705 384.316C648.212 384.965 647.526 385.476 646.645 385.85C645.769 386.22 644.763 386.404 643.627 386.404Z"
				fill="#0F631C"
			/>
			<path
				id="path-02"
				d="M472.061 251.061C472.646 250.475 472.646 249.525 472.061 248.939L462.515 239.393C461.929 238.808 460.979 238.808 460.393 239.393C459.808 239.979 459.808 240.929 460.393 241.515L468.879 250L460.393 258.485C459.808 259.071 459.808 260.021 460.393 260.607C460.979 261.192 461.929 261.192 462.515 260.607L472.061 251.061ZM416 251.5L471 251.5L471 248.5L416 248.5L416 251.5Z"
				fill="currentColor"
			/>
			<path
				id="path-in"
				d="M228.061 251.061C228.646 250.475 228.646 249.525 228.061 248.939L218.515 239.393C217.929 238.808 216.979 238.808 216.393 239.393C215.808 239.979 215.808 240.929 216.393 241.515L224.879 250L216.393 258.485C215.808 259.071 215.808 260.021 216.393 260.607C216.979 261.192 217.929 261.192 218.515 260.607L228.061 251.061ZM185 251.5L227 251.5L227 248.5L185 248.5L185 251.5Z"
				fill="currentColor"
			/>
			<path
				id="path-01"
				d="M324 147L322.5 147L324 147ZM351 120L351 118.5L351 120ZM472.061 121.061C472.647 120.475 472.646 119.525 472.061 118.939L462.515 109.393C461.929 108.808 460.979 108.808 460.393 109.393C459.808 109.979 459.808 110.929 460.393 111.515L468.879 120L460.393 128.485C459.808 129.071 459.808 130.021 460.393 130.607C460.979 131.192 461.929 131.192 462.515 130.607L472.061 121.061ZM325.5 158L325.5 147L322.5 147L322.5 158L325.5 158ZM351 121.5L471 121.5L471 118.5L351 118.5L351 121.5ZM325.5 147C325.5 132.917 336.917 121.5 351 121.5L351 118.5C335.26 118.5 322.5 131.26 322.5 147L325.5 147Z"
				fill="currentColor"
			/>
			<path
				id="path-03"
				d="M324 353L322.5 353L324 353ZM351 380L351 381.5L351 380ZM472.061 381.061C472.646 380.475 472.646 379.525 472.061 378.939L462.515 369.393C461.929 368.808 460.979 368.808 460.393 369.393C459.808 369.979 459.808 370.929 460.393 371.515L468.879 380L460.393 388.485C459.808 389.071 459.808 390.021 460.393 390.607C460.979 391.192 461.929 391.192 462.515 390.607L472.061 381.061ZM322.5 341L322.5 353L325.5 353L325.5 341L322.5 341ZM351 381.5L471 381.5L471 378.5L351 378.5L351 381.5ZM322.5 353C322.5 368.74 335.26 381.5 351 381.5L351 378.5C336.917 378.5 325.5 367.083 325.5 353L322.5 353Z"
				fill="currentColor"
			/>
			<path
				id="path-result-02"
				d="M762.061 251.061C762.646 250.475 762.646 249.525 762.061 248.939L752.515 239.393C751.929 238.808 750.979 238.808 750.393 239.393C749.808 239.979 749.808 240.929 750.393 241.515L758.879 250L750.393 258.485C749.808 259.071 749.808 260.021 750.393 260.607C750.979 261.192 751.929 261.192 752.515 260.607L762.061 251.061ZM694 251.5H761V248.5H694V251.5Z"
				fill="currentColor"
			/>
			<path
				id="path-result-01"
				d="M824.439 189.061C825.025 189.646 825.975 189.646 826.561 189.061L836.107 179.515C836.692 178.929 836.692 177.979 836.107 177.393C835.521 176.808 834.571 176.808 833.985 177.393L825.5 185.879L817.015 177.393C816.429 176.808 815.479 176.808 814.893 177.393C814.308 177.979 814.308 178.929 814.893 179.515L824.439 189.061ZM694 120.5H796.5V117.5H694V120.5ZM824 148V188H827V148H824ZM796.5 120.5C811.688 120.5 824 132.812 824 148H827C827 131.155 813.345 117.5 796.5 117.5V120.5Z"
				fill="currentColor"
			/>
			<path
				id="path-result-03"
				d="M825.561 306.439C824.975 305.854 824.025 305.854 823.439 306.439L813.893 315.985C813.308 316.571 813.308 317.521 813.893 318.107C814.479 318.692 815.429 318.692 816.015 318.107L824.5 309.621L832.985 318.107C833.571 318.692 834.521 318.692 835.107 318.107C835.692 317.521 835.692 316.571 835.107 315.985L825.561 306.439ZM694 380.5H795.5V377.5H694V380.5ZM826 350V307.5H823V350H826ZM795.5 380.5C812.345 380.5 826 366.845 826 350H823C823 365.188 810.688 377.5 795.5 377.5V380.5Z"
				fill="currentColor"
			/>
		</svg>
	);
}
